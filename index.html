<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ElHaji Auto - Administration</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #1a202c;
      --secondary: #3182ce;
      --accent: #e53e3e;
      --light: #f9fafb;
      --dark: #2c3e50;
      --gray: #718096;
      --success: #48bb78;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--light);
      color: var(--dark);
      line-height: 1.6;
      overflow-x: hidden;
    }
    
    /* Header amélioré avec logo */
    header {
      background-color: var(--primary);
      color: white;
      padding: 15px 0;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 15px rgba(0,0,0,0.2);
    }
    
    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .logo-icon {
      background: var(--secondary);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
    }
    
    .logo-text h1 {
      font-size: 1.8rem;
      font-weight: 700;
    }
    
    .logo-text p {
      font-size: 0.9rem;
      color: #cbd5e0;
    }
    
    /* Navigation admin */
    .admin-nav {
      background: var(--dark);
      padding: 15px 0;
    }
    
    .admin-nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      gap: 20px;
    }
    
    .admin-nav a {
      color: #cbd5e0;
      text-decoration: none;
      font-weight: 600;
      padding: 8px 16px;
      border-radius: 6px;
      transition: all 0.3s ease;
    }
    
    .admin-nav a:hover, 
    .admin-nav a.active {
      color: white;
      background: rgba(255,255,255,0.1);
    }
    
    .admin-nav a i {
      margin-right: 8px;
    }
    
    /* Main content */
    .admin-main {
      max-width: 1200px;
      margin: 30px auto;
      padding: 0 20px;
    }
    
    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    
    .admin-header h2 {
      font-size: 2rem;
      color: var(--primary);
    }
    
    .btn {
      padding: 12px 24px;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-primary {
      background-color: var(--secondary);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: #2b6cb0;
    }
    
    .btn-danger {
      background-color: var(--accent);
      color: white;
    }
    
    .btn-danger:hover {
      background-color: #c53030;
    }
    
    /* Tableau des voitures */
    .cars-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    }
    
    .cars-table th, 
    .cars-table td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid #edf2f7;
    }
    
    .cars-table th {
      background: var(--primary);
      color: white;
      font-weight: 600;
    }
    
    .cars-table tr:hover {
      background: #f8fafc;
    }
    
    .car-image-small {
      width: 80px;
      height: 60px;
      object-fit: cover;
      border-radius: 4px;
    }
    
    .action-btns {
      display: flex;
      gap: 8px;
    }
    
    .action-btn {
      width: 36px;
      height: 36px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      color: white;
    }
    
    .edit-btn {
      background: var(--secondary);
    }
    
    .edit-btn:hover {
      background: #2b6cb0;
    }
    
    .delete-btn {
      background: var(--accent);
    }
    
    .delete-btn:hover {
      background: #c53030;
    }
    
    /* Formulaire d'ajout/modification */
    .form-container {
      background: white;
      border-radius: 10px;
      padding: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      margin-top: 30px;
    }
    
    .form-header {
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid #edf2f7;
    }
    
    .form-header h3 {
      font-size: 1.5rem;
      color: var(--primary);
    }
    
    .form-row {
      display: flex;
      flex-wrap: wrap;
      margin: 0 -15px 20px;
    }
    
    .form-group {
      flex: 1 0 calc(50% - 30px);
      margin: 0 15px;
    }
    
    .form-group.full-width {
      flex: 1 0 calc(100% - 30px);
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--primary);
    }
    
    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 12px;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      font-size: 1rem;
      transition: border 0.3s ease;
    }
    
    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--secondary);
    }
    
    .form-group textarea {
      min-height: 120px;
      resize: vertical;
    }
    
    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 15px;
      margin-top: 30px;
    }
    
    /* Notifications */
    .notification {
      padding: 15px;
      margin-bottom: 25px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .success-notification {
      background: rgba(72, 187, 120, 0.15);
      border: 1px solid var(--success);
      color: var(--success);
    }
    
    .error-notification {
      background: rgba(229, 62, 62, 0.15);
      border: 1px solid var(--accent);
      color: var(--accent);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .admin-nav-container {
        flex-direction: column;
        gap: 10px;
      }
      
      .form-group {
        flex: 1 0 calc(100% - 30px);
      }
      
      .action-btns {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="header-container">
    <div class="logo">
      <div class="logo-icon">
        <i class="fas fa-car"></i>
      </div>
      <div class="logo-text">
        <h1>ElHaji Auto</h1>
        <p>Espace Administrateur</p>
      </div>
    </div>
    <div class="contact-header">
      <p><i class="fas fa-user-shield"></i> Administrateur</p>
    </div>
  </div>
</header>

<nav class="admin-nav">
  <div class="admin-nav-container">
    <a href="#" class="active"><i class="fas fa-car"></i> Voitures</a>
    <a href="#"><i class="fas fa-users"></i> Clients</a>
    <a href="#"><i class="fas fa-calendar-check"></i> Rendez-vous</a>
    <a href="#"><i class="fas fa-cog"></i> Paramètres</a>
    <a href="index.html" style="margin-left: auto;"><i class="fas fa-sign-out-alt"></i> Retour au site</a>
  </div>
</nav>

<main class="admin-main">
  <div class="admin-header">
    <h2>Gestion des véhicules</h2>
    <button class="btn btn-primary" id="addCarBtn">
      <i class="fas fa-plus"></i> Ajouter un véhicule
    </button>
  </div>

  <div id="notification" class="notification" style="display: none;"></div>

  <table class="cars-table">
    <thead>
      <tr>
        <th>Image</th>
        <th>Modèle</th>
        <th>Année</th>
        <th>Kilométrage</th>
        <th>Prix</th>
        <th>Statut</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="carsTableBody">
      <!-- Les voitures seront chargées ici par JavaScript -->
    </tbody>
  </table>

  <!-- Formulaire d'ajout/modification (caché par défaut) -->
  <div class="form-container" id="carFormContainer" style="display: none;">
    <div class="form-header">
      <h3 id="formTitle">Ajouter un nouveau véhicule</h3>
    </div>
    
    <form id="carForm">
      <input type="hidden" id="carId">
      
      <div class="form-row">
        <div class="form-group">
          <label for="carName">Modèle *</label>
          <input type="text" id="carName" required placeholder="Ex: Volkswagen Golf 7 GTI">
        </div>
        
        <div class="form-group">
          <label for="carYear">Année *</label>
          <input type="number" id="carYear" min="1980" max="2025" required placeholder="Ex: 2018">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="carMileage">Kilométrage (km) *</label>
          <input type="text" id="carMileage" required placeholder="Ex: 75 000 km">
        </div>
        
        <div class="form-group">
          <label for="carPrice">Prix *</label>
          <input type="text" id="carPrice" required placeholder="Ex: 150 000 DH">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="carFuel">Carburant *</label>
          <select id="carFuel" required>
            <option value="">Sélectionnez</option>
            <option value="essence">Essence</option>
            <option value="diesel">Diesel</option>
            <option value="hybride">Hybride</option>
            <option value="electrique">Électrique</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="carTransmission">Transmission *</label>
          <select id="carTransmission" required>
            <option value="">Sélectionnez</option>
            <option value="manuelle">Manuelle</option>
            <option value="automatique">Automatique</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="carPower">Puissance *</label>
          <input type="text" id="carPower" required placeholder="Ex: 220 ch">
        </div>
        
        <div class="form-group">
          <label for="carColor">Couleur *</label>
          <input type="text" id="carColor" required placeholder="Ex: Gris métallisé">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group full-width">
          <label for="carImages">Images (URLs séparées par des virgules) *</label>
          <textarea id="carImages" required placeholder="https://image1.jpg, https://image2.jpg"></textarea>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group full-width">
          <label for="carDescription">Description *</label>
          <textarea id="carDescription" required></textarea>
        </div>
      </div>
      
      <div class="form-actions">
        <button type="button" class="btn" id="cancelBtn">Annuler</button>
        <button type="submit" class="btn btn-primary" id="saveBtn">Enregistrer</button>
      </div>
    </form>
  </div>
</main>

<script>
  // Récupérer les voitures depuis le localStorage ou utiliser les données par défaut
  let cars = JSON.parse(localStorage.getItem('cars')) || [
    {
      id: 1,
      name: "Volkswagen Golf 5 GT",
      year: 2006,
      mileage: "221 000 km",
      price: "100 000 DH",
      fuel: "Diesel",
      transmission: "Manuel",
      power: "140 ch",
      color: "Gris métallisé",
      images: [
        "https://i.imgur.com/voQaWQL.png",
        "https://i.imgur.com/damId9b.png",
        "https://i.imgur.com/auIaN7Z.png",
        "https://i.imgur.com/iCwuNZN.png"
      ],
      description: "La Volkswagen Golf 5 GT est une voiture compacte sportive offrant un équilibre parfait entre performances et confort quotidien. Avec son moteur 2.0L TDI de 140 chevaux, elle assure une conduite dynamique tout en restant économique."
    },
    {
      id: 2,
      name: "Seat Leon 2009",
      year: 2009,
      mileage: "320 000 km",
      price: "75 000 DH",
      fuel: "Diesel",
      transmission: "Manuel",
      power: "140 ch",
      color: "Gris métallisé",
      images: [
        "https://i.imgur.com/qCKObXz.png",
        "https://i.imgur.com/LFiCULN.png",
        "https://i.imgur.com/18cdGe1.png",
        "https://i.imgur.com/CpRBCli.png",
        "https://i.imgur.com/H5R9PoN.png",
        "https://i.imgur.com/hdyr8m0.png"
      ],
      description: "La Seat Leon est une voiture compacte sportive basée sur la plateforme de la Golf, offrant un look plus agressif et des performances similaires à un prix plus attractif."
    },
    {
      id: 3,
      name: "Mazda 2 2009",
      year: 2009,
      mileage: "170 000 km",
      price: "50 000 DH",
      fuel: "Essence",
      transmission: "Manuel",
      power: "100 ch",
      color: "Blue",
      images: [
        "https://i.imgur.com/mAeUgT5.png",
        "https://i.imgur.com/YQlN0GI.png",
        "https://i.imgur.com/PRYJY2i.png",
        "https://i.imgur.com/4b43W9d.png"
      ],
      description: "La Mazda 2 est une citadine économique et fiable, avec un design dynamique et une conduite agréable. Parfaite pour la ville tout en étant capable sur route."
    },
    {
      id: 4,
      name: "Nissan Pathfinder 2008",
      year: 2008,
      mileage: "330 000 km",
      price: "80 000 DH",
      fuel: "Diesel",
      transmission: "Manuel",
      power: "140 ch",
      color: "Gris métallisé",
      images: [
        "https://i.imgur.com/jgnaTks.png",
        "https://i.imgur.com/q97Bq1y.png",
        "https://i.imgur.com/7RgIHoM.png",
        "https://i.imgur.com/A6wCpUq.png"
      ],
      description: "Le Nissan Pathfinder est un SUV spacieux et robuste, idéal pour les familles nombreuses ou les amateurs de grand espace et de confort."
    }
  ];

  // Sauvegarder les voitures dans le localStorage
  function saveCars() {
    localStorage.setItem('cars', JSON.stringify(cars));
  }

  // Afficher les voitures dans le tableau
  function renderCars() {
    const tbody = document.getElementById('carsTableBody');
    tbody.innerHTML = '';
    
    cars.forEach(car => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td><img src="${car.images[0]}" alt="${car.name}" class="car-image-small"></td>
        <td>${car.name}</td>
        <td>${car.year}</td>
        <td>${car.mileage}</td>
        <td>${car.price}</td>
        <td>${car.id <= 2 ? '<span style="color: var(--success);">En stock</span>' : '<span style="color: var(--accent);">Vendu</span>'}</td>
        <td>
          <div class="action-btns">
            <button class="action-btn edit-btn" data-id="${car.id}">
              <i class="fas fa-edit"></i>
            </button>
            <button class="action-btn delete-btn" data-id="${car.id}">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </td>
      `;
      tbody.appendChild(tr);
    });
    
    // Ajouter les événements aux boutons
    document.querySelectorAll('.edit-btn').forEach(btn => {
      btn.addEventListener('click', () => editCar(parseInt(btn.getAttribute('data-id'))));
    });
    
    document.querySelectorAll('.delete-btn').forEach(btn => {
      btn.addEventListener('click', () => deleteCar(parseInt(btn.getAttribute('data-id'))));
    });
  }

  // Afficher le formulaire
  function showForm() {
    document.getElementById('carFormContainer').style.display = 'block';
    document.getElementById('carsTableBody').style.opacity = '0.5';
    document.getElementById('addCarBtn').style.display = 'none';
    window.scrollTo({ top: document.getElementById('carFormContainer').offsetTop, behavior: 'smooth' });
  }

  // Cacher le formulaire
  function hideForm() {
    document.getElementById('carFormContainer').style.display = 'none';
    document.getElementById('carsTableBody').style.opacity = '1';
    document.getElementById('addCarBtn').style.display = 'flex';
    document.getElementById('carForm').reset();
    document.getElementById('carId').value = '';
    document.getElementById('formTitle').textContent = 'Ajouter un nouveau véhicule';
  }

  // Ajouter une nouvelle voiture
  function addCar() {
    document.getElementById('formTitle').textContent = 'Ajouter un nouveau véhicule';
    showForm();
  }

  // Éditer une voiture existante
  function editCar(id) {
    const car = cars.find(c => c.id === id);
    if (!car) return;
    
    document.getElementById('formTitle').textContent = 'Modifier le véhicule';
    document.getElementById('carId').value = car.id;
    document.getElementById('carName').value = car.name;
    document.getElementById('carYear').value = car.year;
    document.getElementById('carMileage').value = car.mileage;
    document.getElementById('carPrice').value = car.price;
    document.getElementById('carFuel').value = car.fuel.toLowerCase();
    document.getElementById('carTransmission').value = car.transmission.toLowerCase();
    document.getElementById('carPower').value = car.power;
    document.getElementById('carColor').value = car.color;
    document.getElementById('carImages').value = car.images.join(', ');
    document.getElementById('carDescription').value = car.description;
    
    showForm();
  }

  // Supprimer une voiture
  function deleteCar(id) {
    if (confirm('Êtes-vous sûr de vouloir supprimer ce véhicule ? Cette action est irréversible.')) {
      cars = cars.filter(c => c.id !== id);
      saveCars();
      renderCars();
      showNotification('Véhicule supprimé avec succès', 'success');
    }
  }

  // Sauvegarder le formulaire (ajout ou modification)
  function saveCar(e) {
    e.preventDefault();
    
    const id = document.getElementById('carId').value;
    const carData = {
      name: document.getElementById('carName').value,
      year: parseInt(document.getElementById('carYear').value),
      mileage: document.getElementById('carMileage').value,
      price: document.getElementById('carPrice').value,
      fuel: document.getElementById('carFuel').value,
      transmission: document.getElementById('carTransmission').value,
      power: document.getElementById('carPower').value,
      color: document.getElementById('carColor').value,
      images: document.getElementById('carImages').value.split(',').map(url => url.trim()),
      description: document.getElementById('carDescription').value
    };
    
    if (id) {
      // Modification
      const index = cars.findIndex(c => c.id === parseInt(id));
      if (index !== -1) {
        cars[index] = { ...cars[index], ...carData };
        saveCars();
        renderCars();
        hideForm();
        showNotification('Véhicule modifié avec succès', 'success');
      }
    } else {
      // Ajout
      const newId = cars.length > 0 ? Math.max(...cars.map(c => c.id)) + 1 : 1;
      cars.push({ id: newId, ...carData });
      saveCars();
      renderCars();
      hideForm();
      showNotification('Véhicule ajouté avec succès', 'success');
    }
  }

  // Afficher une notification
  function showNotification(message, type) {
    const notification = document.getElementById('notification');
    notification.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i> ${message}`;
    notification.className = `notification ${type}-notification`;
    notification.style.display = 'flex';
    
    setTimeout(() => {
      notification.style.display = 'none';
    }, 5000);
  }

  // Événements
  document.getElementById('addCarBtn').addEventListener('click', addCar);
  document.getElementById('cancelBtn').addEventListener('click', hideForm);
  document.getElementById('carForm').addEventListener('submit', saveCar);

  // Initialisation
  document.addEventListener('DOMContentLoaded', () => {
    saveCars(); // Sauvegarder les données par défaut si c'est la première fois
    renderCars();
  });
</script>

</body>
</html>
