<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin - ElHaji Auto</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #1a202c;
      --secondary: #3182ce;
      --accent: #e53e3e;
      --light: #f9fafb;
      --dark: #2c3e50;
      --gray: #718096;
      --success: #48bb78;
      --warning: #ed8936;
      --danger: #e53e3e;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f5f7fa;
      color: var(--dark);
      line-height: 1.6;
      overflow-x: hidden;
    }
    
    /* Admin Header */
    .admin-header {
      background-color: var(--primary);
      color: white;
      padding: 15px 0;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 15px rgba(0,0,0,0.2);
    }
    
    .admin-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .admin-header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .admin-logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .admin-logo-icon {
      background: var(--secondary);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
    }
    
    .admin-logo-text h1 {
      font-size: 1.8rem;
      font-weight: 700;
    }
    
    .admin-logo-text p {
      font-size: 0.9rem;
      color: #cbd5e0;
    }
    
    /* Login Container */
    .login-container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      background: linear-gradient(135deg, #1a202c, #2d3748);
    }
    
    .login-box {
      background: white;
      border-radius: 15px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.3);
      width: 100%;
      max-width: 450px;
      padding: 40px;
      text-align: center;
    }
    
    .login-box h2 {
      color: var(--primary);
      margin-bottom: 30px;
      font-size: 1.8rem;
      position: relative;
      display: inline-block;
    }
    
    .login-box h2::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: var(--secondary);
      border-radius: 2px;
    }
    
    .form-group {
      margin-bottom: 25px;
      text-align: left;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--primary);
    }
    
    .form-group input {
      width: 100%;
      padding: 14px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 1rem;
      transition: border 0.3s ease;
    }
    
    .form-group input:focus {
      outline: none;
      border-color: var(--secondary);
      box-shadow: 0 0 0 3px rgba(49,130,206,0.2);
    }
    
    .login-btn {
      background: var(--secondary);
      color: white;
      border: none;
      padding: 16px;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      margin-top: 10px;
    }
    
    .login-btn:hover {
      background: #2b6cb0;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(49,130,206,0.4);
    }
    
    .error-message {
      color: var(--accent);
      margin-top: 15px;
      display: none;
    }
    
    /* Dashboard */
    .dashboard {
      display: none;
      padding: 40px 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    .dashboard-title h2 {
      font-size: 2.2rem;
      color: var(--primary);
    }
    
    .dashboard-title p {
      color: var(--gray);
      margin-top: 8px;
    }
    
    .logout-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 25px;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .logout-btn:hover {
      background: #c53030;
      transform: translateY(-2px);
    }
    
    /* Stats Cards */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .stat-card {
      background: white;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      display: flex;
      align-items: center;
      gap: 20px;
      transition: transform 0.3s ease;
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
    }
    
    .stat-icon {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
    }
    
    .stat-1 .stat-icon {
      background: rgba(72,187,120,0.15);
      color: var(--success);
    }
    
    .stat-2 .stat-icon {
      background: rgba(49,130,206,0.15);
      color: var(--secondary);
    }
    
    .stat-3 .stat-icon {
      background: rgba(237,137,54,0.15);
      color: var(--warning);
    }
    
    .stat-4 .stat-icon {
      background: rgba(229,62,62,0.15);
      color: var(--danger);
    }
    
    .stat-text .number {
      font-size: 1.8rem;
      font-weight: 700;
      line-height: 1;
    }
    
    .stat-text .label {
      color: var(--gray);
      font-size: 0.95rem;
    }
    
    /* Table des demandes */
    .requests-container {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      margin-bottom: 50px;
    }
    
    .requests-header {
      padding: 25px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #edf2f7;
    }
    
    .requests-header h3 {
      font-size: 1.5rem;
      color: var(--primary);
    }
    
    .requests-actions {
      display: flex;
      gap: 15px;
    }
    
    .filter-select {
      padding: 10px 15px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 0.95rem;
      background: white;
      cursor: pointer;
    }
    
    .requests-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .requests-table th {
      background: #f7fafc;
      padding: 15px 20px;
      text-align: left;
      font-weight: 600;
      color: var(--dark);
      border-bottom: 1px solid #e2e8f0;
    }
    
    .requests-table td {
      padding: 15px 20px;
      border-bottom: 1px solid #edf2f7;
    }
    
    .requests-table tr:hover {
      background-color: #f9fafb;
    }
    
    .car-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .car-thumb {
      width: 60px;
      height: 40px;
      border-radius: 6px;
      overflow: hidden;
    }
    
    .car-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .car-details h4 {
      font-size: 1.05rem;
      margin-bottom: 5px;
    }
    
    .car-details p {
      font-size: 0.9rem;
      color: var(--gray);
    }
    
    .status-badge {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }
    
    .status-new {
      background: rgba(49,130,206,0.15);
      color: var(--secondary);
    }
    
    .status-pending {
      background: rgba(237,137,54,0.15);
      color: var(--warning);
    }
    
    .status-completed {
      background: rgba(72,187,120,0.15);
      color: var(--success);
    }
    
    .action-btn {
      padding: 8px 15px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .view-btn {
      background: rgba(49,130,206,0.1);
      color: var(--secondary);
    }
    
    .view-btn:hover {
      background: rgba(49,130,206,0.2);
    }
    
    .delete-btn {
      background: rgba(229,62,62,0.1);
      color: var(--accent);
    }
    
    .delete-btn:hover {
      background: rgba(229,62,62,0.2);
    }
    
    .actions-cell {
      display: flex;
      gap: 10px;
    }
    
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.85);
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-y: auto;
    }
    
    .modal-content {
      background: white;
      border-radius: 15px;
      max-width: 800px;
      width: 100%;
      position: relative;
      box-shadow: 0 20px 50px rgba(0,0,0,0.4);
      animation: modalFadeIn 0.4s ease forwards;
    }
    
    @keyframes modalFadeIn {
      from {opacity: 0; transform: translateY(50px);}
      to {opacity: 1; transform: translateY(0);}
    }
    
    .modal-close {
      position: absolute;
      top: 20px;
      right: 25px;
      font-size: 2rem;
      font-weight: 700;
      color: #333;
      cursor: pointer;
      z-index: 10;
      transition: color 0.3s ease;
      background: rgba(255,255,255,0.8);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .modal-close:hover {
      color: var(--accent);
    }
    
    .modal-header {
      padding: 30px 30px 15px;
      border-bottom: 1px solid #edf2f7;
    }
    
    .modal-header h3 {
      font-size: 1.8rem;
      color: var(--primary);
    }
    
    .modal-body {
      padding: 30px;
    }
    
    .request-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }
    
    .detail-group {
      margin-bottom: 25px;
    }
    
    .detail-group h4 {
      font-size: 1.1rem;
      margin-bottom: 12px;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .detail-group h4 i {
      color: var(--secondary);
    }
    
    .detail-content {
      background: #f9fafb;
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid var(--secondary);
    }
    
    .detail-row {
      display: flex;
      margin-bottom: 15px;
    }
    
    .detail-label {
      font-weight: 600;
      width: 150px;
      color: var(--dark);
    }
    
    .detail-value {
      flex: 1;
      color: var(--gray);
    }
    
    .car-condition {
      background: #f9fafb;
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid var(--secondary);
      margin-top: 20px;
    }
    
    .car-condition p {
      line-height: 1.8;
    }
    
    .modal-footer {
      padding: 20px 30px;
      border-top: 1px solid #edf2f7;
      display: flex;
      justify-content: flex-end;
      gap: 15px;
    }
    
    .modal-btn {
      padding: 12px 25px;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    
    .btn-close {
      background: #f7fafc;
      color: var(--dark);
      border-color: #e2e8f0;
    }
    
    .btn-close:hover {
      background: #edf2f7;
    }
    
    .btn-delete {
      background: rgba(229,62,62,0.1);
      color: var(--accent);
      border-color: rgba(229,62,62,0.3);
    }
    
    .btn-delete:hover {
      background: rgba(229,62,62,0.2);
    }
    
    .btn-contact {
      background: var(--secondary);
      color: white;
    }
    
    .btn-contact:hover {
      background: #2b6cb0;
    }
    
    /* Responsive Design */
    @media (max-width: 992px) {
      .request-details {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 768px) {
      .requests-table thead {
        display: none;
      }
      
      .requests-table tr {
        display: block;
        margin-bottom: 20px;
        border: 1px solid #e2e8f0;
        border-radius: 10px;
        padding: 10px;
      }
      
      .requests-table td {
        display: flex;
        justify-content: space-between;
        padding: 12px 10px;
        border-bottom: 1px solid #edf2f7;
      }
      
      .requests-table td::before {
        content: attr(data-label);
        font-weight: 600;
        color: var(--dark);
        margin-right: 15px;
        flex: 1;
      }
      
      .requests-table td .actions-cell {
        justify-content: flex-end;
      }
      
      .car-info {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .dashboard-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .logout-btn {
        width: 100%;
        justify-content: center;
      }
    }
    
    @media (max-width: 576px) {
      .login-box {
        padding: 30px 20px;
      }
      
      .requests-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .requests-actions {
        width: 100%;
        justify-content: space-between;
      }
      
      .filter-select {
        width: 100%;
      }
      
      .stat-card {
        flex-direction: column;
        text-align: center;
      }
    }
  </style>
</head>
<body>

<!-- Login Section -->
<div class="login-container" id="loginSection">
  <div class="login-box">
    <div class="admin-logo">
      <div class="admin-logo-icon">
        <i class="fas fa-car"></i>
      </div>
      <div class="admin-logo-text">
        <h1>ElHaji Auto</h1>
        <p>Tableau d'Administration</p>
      </div>
    </div>
    
    <h2>Connexion Administrateur</h2>
    
    <form id="loginForm">
      <div class="form-group">
        <label for="username">Nom d'utilisateur</label>
        <input type="text" id="username" placeholder="Entrez votre nom d'utilisateur" required>
      </div>
      
      <div class="form-group">
        <label for="password">Mot de passe</label>
        <input type="password" id="password" placeholder="Entrez votre mot de passe" required>
      </div>
      
      <button type="submit" class="login-btn">
        <i class="fas fa-sign-in-alt"></i> Se connecter
      </button>
      
      <div class="error-message" id="loginError">
        <i class="fas fa-exclamation-circle"></i> Identifiants incorrects. Veuillez réessayer.
      </div>
    </form>
  </div>
</div>

<!-- Dashboard Section -->
<div class="dashboard" id="dashboard">
  <header class="admin-header">
    <div class="admin-container">
      <div class="admin-header-content">
        <div class="admin-logo">
          <div class="admin-logo-icon">
            <i class="fas fa-car"></i>
          </div>
          <div class="admin-logo-text">
            <h1>ElHaji Auto</h1>
            <p>Tableau d'Administration</p>
          </div>
        </div>
        <button class="logout-btn" id="logoutBtn">
          <i class="fas fa-sign-out-alt"></i> Déconnexion
        </button>
      </div>
    </div>
  </header>
  
  <div class="admin-container">
    <div class="dashboard-header">
      <div class="dashboard-title">
        <h2>Demandes de vente</h2>
        <p>Gestion des véhicules proposés par les clients</p>
      </div>
    </div>
    
    <div class="stats-container">
      <div class="stat-card stat-1">
        <div class="stat-icon">
          <i class="fas fa-car"></i>
        </div>
        <div class="stat-text">
          <div class="number" id="totalRequests">12</div>
          <div class="label">Demandes totales</div>
        </div>
      </div>
      
      <div class="stat-card stat-2">
        <div class="stat-icon">
          <i class="fas fa-clock"></i>
        </div>
        <div class="stat-text">
          <div class="number" id="pendingRequests">5</div>
          <div class="label">En attente</div>
        </div>
      </div>
      
      <div class="stat-card stat-3">
        <div class="stat-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <div class="stat-text">
          <div class="number" id="completedRequests">3</div>
          <div class="label">Traitées</div>
        </div>
      </div>
      
      <div class="stat-card stat-4">
        <div class="stat-icon">
          <i class="fas fa-times-circle"></i>
        </div>
        <div class="stat-text">
          <div class="number" id="rejectedRequests">4</div>
          <div class="label">Rejetées</div>
        </div>
      </div>
    </div>
    
    <div class="requests-container">
      <div class="requests-header">
        <h3>Liste des demandes</h3>
        <div class="requests-actions">
          <select class="filter-select" id="statusFilter">
            <option value="all">Toutes les demandes</option>
            <option value="new">Nouvelles</option>
            <option value="pending">En attente</option>
            <option value="completed">Traitées</option>
            <option value="rejected">Rejetées</option>
          </select>
        </div>
      </div>
      
      <div class="table-responsive">
        <table class="requests-table">
          <thead>
            <tr>
              <th>Véhicule</th>
              <th>Client</th>
              <th>Date</th>
              <th>Statut</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="requestsTable">
            <!-- Les demandes seront injectées ici par JavaScript -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Modal for request details -->
<div id="requestModal" class="modal" onclick="closeModal(event)">
  <div class="modal-content" onclick="event.stopPropagation()">
    <span class="modal-close" onclick="closeModal(event)">&times;</span>
    <div class="modal-header">
      <h3 id="modalRequestTitle">Détails de la demande</h3>
    </div>
    <div class="modal-body">
      <div class="request-details">
        <div class="detail-group">
          <h4><i class="fas fa-user"></i> Informations client</h4>
          <div class="detail-content">
            <div class="detail-row">
              <div class="detail-label">Nom complet:</div>
              <div class="detail-value" id="clientName">Mohamed ElHaji</div>
            </div>
            <div class="detail-row">
              <div class="detail-label">Téléphone:</div>
              <div class="detail-value" id="clientPhone">+212 6 12 34 56 78</div>
            </div>
            <div class="detail-row">
              <div class="detail-label">Email:</div>
              <div class="detail-value" id="clientEmail">contact@elhajiauto.com</div>
            </div>
            <div class="detail-row">
              <div class="detail-label">Date souhaitée:</div>
              <div class="detail-value" id="requestDate">15/07/2025</div>
            </div>
          </div>
        </div>
        
        <div class="detail-group">
          <h4><i class="fas fa-car"></i> Détails du véhicule</h4>
          <div class="detail-content">
            <div class="detail-row">
              <div class="detail-label">Marque:</div>
              <div class="detail-value" id="carBrand">Volkswagen</div>
            </div>
            <div class="detail-row">
              <div class="detail-label">Modèle:</div>
              <div class="detail-value" id="carModel">Golf 7 GTI</div>
            </div>
            <div class="detail-row">
              <div class="detail-label">Année:</div>
              <div class="detail-value" id="carYear">2018</div>
            </div>
            <div class="detail-row">
              <div class="detail-label">Kilométrage:</div>
              <div class="detail-value" id="carMileage">75 000 km</div>
            </div>
            <div class="detail-row">
              <div class="detail-label">Carburant:</div>
              <div class="detail-value" id="carFuel">Essence</div>
            </div>
            <div class="detail-row">
              <div class="detail-label">Transmission:</div>
              <div class="detail-value" id="carTransmission">Automatique</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="detail-group">
        <h4><i class="fas fa-file-alt"></i> État du véhicule</h4>
        <div class="car-condition">
          <p id="carCondition">Le véhicule est en très bon état général, seulement quelques rayures légères sur la portière conducteur. Aucun accident déclaré. Entretien régulier effectué chez un concessionnaire agréé. Les pneus ont été changés il y a 10 000 km. Intérieur impeccable.</p>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="modal-btn btn-close" onclick="closeModal()">Fermer</button>
      <button class="modal-btn btn-contact"><i class="fas fa-phone"></i> Contacter le client</button>
      <button class="modal-btn btn-delete"><i class="fas fa-trash"></i> Supprimer</button>
    </div>
  </div>
</div>

<script>
  // Configuration d'administration
  const ADMIN_USERNAME = "admin";
  const ADMIN_PASSWORD = "admin123"; // Mot de passe simplifié pour la démo

  // Données de démonstration pour les demandes de vente
  const sellRequests = [
    {
      id: 1,
      client: {
        name: "Karim Benzema",
        phone: "+212 6 12 34 56 78",
        email: "karim.b@example.com"
      },
      car: {
        brand: "Volkswagen",
        model: "Golf 7 GTI",
        year: 2018,
        mileage: "75 000 km",
        fuel: "Essence",
        transmission: "Automatique",
        condition: "Le véhicule est en très bon état général, seulement quelques rayures légères sur la portière conducteur. Aucun accident déclaré. Entretien régulier effectué chez un concessionnaire agréé. Les pneus ont été changés il y a 10 000 km. Intérieur impeccable."
      },
      date: "2025-06-15",
      status: "new",
      thumbnail: "https://images.unsplash.com/photo-1549924231-f129b911e442?auto=format&fit=crop&w=800&q=70"
    },
    {
      id: 2,
      client: {
        name: "Hakim Ziyech",
        phone: "+212 6 23 45 67 89",
        email: "h.ziyech@example.com"
      },
      car: {
        brand: "BMW",
        model: "Série 3 320d",
        year: 2020,
        mileage: "45 000 km",
        fuel: "Diesel",
        transmission: "Automatique",
        condition: "Véhicule premium bien entretenu. Carrosserie en parfait état sans rayure. Intérieur cuir comme neuf. Entretien à jour chez BMW. Vendue avec factures d'entretien. Révision effectuée il y a 2 mois."
      },
      date: "2025-06-12",
      status: "pending",
      thumbnail: "https://images.unsplash.com/photo-1552519507-da3b142c6e3d?auto=format&fit=crop&w=800&q=70"
    },
    {
      id: 3,
      client: {
        name: "Noura Akif",
        phone: "+212 6 98 76 54 32",
        email: "noura.a@example.com"
      },
      car: {
        brand: "Dacia",
        model: "Duster TCe 130",
        year: 2019,
        mileage: "60 000 km",
        fuel: "Essence",
        transmission: "Manuelle",
        condition: "SUV familial bien entretenu. Quelques petits impacts sur les pare-chocs. Intérieur propre mais sièges un peu usés. Moteur en parfait état. Révision effectuée il y a 3 mois. Vendue avec un jeu de pneus hiver supplémentaire."
      },
      date: "2025-06-10",
      status: "completed",
      thumbnail: "https://images.unsplash.com/photo-1597006521907-885898bd32bc?auto=format&fit=crop&w=800&q=70"
    },
    {
      id: 4,
      client: {
        name: "Youssef En-Nesyri",
        phone: "+212 6 11 22 33 44",
        email: "y.enesyri@example.com"
      },
      car: {
        brand: "Mercedes",
        model: "Classe C 200",
        year: 2021,
        mileage: "32 000 km",
        fuel: "Essence",
        transmission: "Automatique",
        condition: "Véhicule haut de gamme en excellent état. Pas d'accident, carrosserie impeccable. Intérieur luxueux bien préservé. Toutes les options. Entretien exclusif chez Mercedes. Garantie constructeur encore valable 6 mois."
      },
      date: "2025-06-08",
      status: "rejected",
      thumbnail: "https://images.unsplash.com/photo-1553440569-bcc63803a83d?auto=format&fit=crop&w=800&q=70"
    },
    {
      id: 5,
      client: {
        name: "Zouhair Feddal",
        phone: "+212 6 55 44 33 22",
        email: "z.feddal@example.com"
      },
      car: {
        brand: "Audi",
        model: "Q5 Sportback",
        year: 2020,
        mileage: "38 000 km",
        fuel: "Diesel",
        transmission: "Automatique",
        condition: "SUV premium avec ligne sportive. Très bon état général. Peinture métallisée sans défaut. Jantes alliage 19\" impeccable. Intérieur cuir noir sans trace d'usure. Tous les entretiens effectués chez Audi."
      },
      date: "2025-06-05",
      status: "new",
      thumbnail: "https://images.unsplash.com/photo-1541899481282-d53bffe3c35d?auto=format&fit=crop&w=800&q=70"
    },
    {
      id: 6,
      client: {
        name: "Lamia Azizi",
        phone: "+212 6 77 88 99 00",
        email: "lamia.a@example.com"
      },
      car: {
        brand: "Peugeot",
        model: "308 GT",
        year: 2019,
        mileage: "55 000 km",
        fuel: "Essence",
        transmission: "Automatique",
        condition: "Compacte française sportive. Carrosserie en bon état avec quelques micro-rayures. Intérieur en bon état, écran tactile légèrement rayé. Moteur performant et économique. Dernière révision il y a 4 mois."
      },
      date: "2025-06-03",
      status: "pending",
      thumbnail: "https://images.unsplash.com/photo-1555215695-3004980ad54e?auto=format&fit=crop&w=800&q=70"
    }
  ];
  
  // Éléments DOM
  const loginSection = document.getElementById('loginSection');
  const dashboard = document.getElementById('dashboard');
  const loginForm = document.getElementById('loginForm');
  const loginError = document.getElementById('loginError');
  const logoutBtn = document.getElementById('logoutBtn');
  const requestsTable = document.getElementById('requestsTable');
  const statusFilter = document.getElementById('statusFilter');
  const totalRequests = document.getElementById('totalRequests');
  const pendingRequests = document.getElementById('pendingRequests');
  const completedRequests = document.getElementById('completedRequests');
  const rejectedRequests = document.getElementById('rejectedRequests');
  const requestModal = document.getElementById('requestModal');
  
  // Fonction pour vérifier la connexion
  function checkAuth() {
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    if (isLoggedIn) {
      loginSection.style.display = 'none';
      dashboard.style.display = 'block';
      renderRequests();
      updateStats();
    }
  }
  
  // Connexion
  loginForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    
    if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
      localStorage.setItem('isLoggedIn', 'true');
      loginError.style.display = 'none';
      loginSection.style.display = 'none';
      dashboard.style.display = 'block';
      renderRequests();
      updateStats();
    } else {
      loginError.style.display = 'block';
    }
  });
  
  // Déconnexion
  logoutBtn.addEventListener('click', function() {
    localStorage.removeItem('isLoggedIn');
    loginSection.style.display = 'flex';
    dashboard.style.display = 'none';
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
    loginError.style.display = 'none';
  });
  
  // Afficher les demandes dans le tableau
  function renderRequests() {
    const status = statusFilter.value;
    let filteredRequests = sellRequests;
    
    if (status !== 'all') {
      filteredRequests = sellRequests.filter(request => request.status === status);
    }
    
    requestsTable.innerHTML = '';
    
    filteredRequests.forEach(request => {
      const row = document.createElement('tr');
      
      // Format de la date
      const dateObj = new Date(request.date);
      const formattedDate = dateObj.toLocaleDateString('fr-FR', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric'
      });
      
      // Statut en français
      let statusText, statusClass;
      switch(request.status) {
        case 'new':
          statusText = 'Nouveau';
          statusClass = 'status-new';
          break;
        case 'pending':
          statusText = 'En attente';
          statusClass = 'status-pending';
          break;
        case 'completed':
          statusText = 'Traité';
          statusClass = 'status-completed';
          break;
        case 'rejected':
          statusText = 'Rejeté';
          statusClass = 'status-pending'; // On utilise pending pour la couleur orange
          break;
      }
      
      row.innerHTML = `
        <td data-label="Véhicule">
          <div class="car-info">
            <div class="car-thumb">
              <img src="${request.thumbnail}" alt="${request.car.brand} ${request.car.model}">
            </div>
            <div class="car-details">
              <h4>${request.car.brand} ${request.car.model}</h4>
              <p>${request.car.year} • ${request.car.mileage}</p>
            </div>
          </div>
        </td>
        <td data-label="Client">
          <div>${request.client.name}</div>
          <div style="color: var(--gray); font-size: 0.9rem;">${request.client.phone}</div>
        </td>
        <td data-label="Date">${formattedDate}</td>
        <td data-label="Statut">
          <span class="status-badge ${statusClass}">${statusText}</span>
        </td>
        <td data-label="Actions">
          <div class="actions-cell">
            <button class="action-btn view-btn" onclick="openRequestModal(${request.id})">
              <i class="fas fa-eye"></i> Voir
            </button>
            <button class="action-btn delete-btn" onclick="deleteRequest(${request.id})">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </td>
      `;
      
      requestsTable.appendChild(row);
    });
  }
  
  // Mettre à jour les statistiques
  function updateStats() {
    totalRequests.textContent = sellRequests.length;
    
    const pending = sellRequests.filter(r => r.status === 'pending' || r.status === 'new').length;
    const completed = sellRequests.filter(r => r.status === 'completed').length;
    const rejected = sellRequests.filter(r => r.status === 'rejected').length;
    
    pendingRequests.textContent = pending;
    completedRequests.textContent = completed;
    rejectedRequests.textContent = rejected;
  }
  
  // Ouvrir le modal avec les détails de la demande
  function openRequestModal(id) {
    const request = sellRequests.find(r => r.id === id);
    if (!request) return;
    
    // Format de la date
    const dateObj = new Date(request.date);
    const formattedDate = dateObj.toLocaleDateString('fr-FR', {
      day: '2-digit',
      month: '2-digit',
      year: 'numeric'
    });
    
    // Mettre à jour le contenu du modal
    document.getElementById('modalRequestTitle').textContent = `Demande #${request.id} - ${request.car.brand} ${request.car.model}`;
    document.getElementById('clientName').textContent = request.client.name;
    document.getElementById('clientPhone').textContent = request.client.phone;
    document.getElementById('clientEmail').textContent = request.client.email;
    document.getElementById('requestDate').textContent = formattedDate;
    document.getElementById('carBrand').textContent = request.car.brand;
    document.getElementById('carModel').textContent = request.car.model;
    document.getElementById('carYear').textContent = request.car.year;
    document.getElementById('carMileage').textContent = request.car.mileage;
    document.getElementById('carFuel').textContent = request.car.fuel;
    document.getElementById('carTransmission').textContent = request.car.transmission;
    document.getElementById('carCondition').textContent = request.car.condition;
    
    // Afficher le modal
    requestModal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  }
  
  // Fermer le modal
  function closeModal() {
    requestModal.style.display = 'none';
    document.body.style.overflow = 'auto';
  }
  
  // Supprimer une demande
  function deleteRequest(id) {
    if (confirm('Êtes-vous sûr de vouloir supprimer cette demande ?')) {
      const index = sellRequests.findIndex(r => r.id === id);
      if (index !== -1) {
        sellRequests.splice(index, 1);
        renderRequests();
        updateStats();
        alert('Demande supprimée avec succès !');
      }
    }
  }
  
  // Filtrer les demandes par statut
  statusFilter.addEventListener('change', renderRequests);
  
  // Vérifier l'authentification au chargement
  window.addEventListener('DOMContentLoaded', function() {
    checkAuth();
    
    // Ajout d'un message de démonstration
    if (!localStorage.getItem('demoMessageShown')) {
      setTimeout(function() {
        alert("Bienvenue dans le tableau d'administration ElHaji Auto!\n\nIdentifiants de démonstration:\nUtilisateur: admin\nMot de passe: admin123");
        localStorage.setItem('demoMessageShown', 'true');
      }, 1000);
    }
  });
</script>

</body>
</html>
